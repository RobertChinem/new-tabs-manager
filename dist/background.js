(()=>{"use strict";var t={5917:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default={UPDATE_DOMAIN_RULES:"update_domain_rules",GET_DOMAIN_RULES:"get_domain_rules",GROUP_TABS_BY_DOMAIN:"group_tabs_by_domain",UNGROUP_TABS:"ungroup_tabs",SORT_TABS_BY_DOMAIN:"sort_tabs_by_domain",GET_COMMANDS:"get_commands",EXTRACT_TABS:"extract_tabs",UPDATE_TAGS:"update_tags",GET_TAGS:"get_tags",EXTRACT_TABS_BY_TAG:"extract_tabs_by_tag",OPEN_AND_EXTRACT_TABS_BY_TAG:"open_and_extract_tabs_by_tag",ADD_TAG_TO_CURRENT_TAB:"add_tag_to_current_tab",MERGE_ALL_TABS:"merge_all_tabs"}},6752:function(t,e,n){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(n(6970));e.default=class{constructor(){this.chromeListenerForMessages=new r.default}init(){this.chromeListenerForMessages.init()}}},8384:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{s(o.next(t))}catch(t){i(t)}}function a(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((o=o.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(6966)),u=r(n(9605));e.default=class{constructor(){this.mapper=new i.default,this.service=new u.default}execute({request:t}){return o(this,void 0,void 0,(function*(){const e=this.mapper.toAddTagToCurrentTabRequest(t);this.service.execute(e)}))}}},6009:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{s(o.next(t))}catch(t){i(t)}}function a(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((o=o.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(6966)),u=r(n(6374)),a=n(9973);class s extends a.MessagesController{constructor(){super(...arguments),this.mapper=new i.default,this.service=new u.default}execute({request:t}){return o(this,void 0,void 0,(function*(){const e=this.mapper.toExtractTabsByTagRequest(t);yield this.service.execute(e)}))}}e.default=s},2014:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{s(o.next(t))}catch(t){i(t)}}function a(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((o=o.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(6966)),u=r(n(6397)),a=n(9973);class s extends a.MessagesController{constructor(){super(...arguments),this.mapper=new i.default,this.service=new u.default}execute({request:t}){return o(this,void 0,void 0,(function*(){const e=this.mapper.toExtractTabsRequest(t);yield this.service.execute(e)}))}}e.default=s},4878:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{s(o.next(t))}catch(t){i(t)}}function a(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((o=o.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(9887)),u=n(9973);class a extends u.MessagesController{constructor(){super(...arguments),this.service=new i.default}execute({sendResponse:t}){return o(this,void 0,void 0,(function*(){const e=yield this.service.execute();t(e)}))}}e.default=a},9755:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{s(o.next(t))}catch(t){i(t)}}function a(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((o=o.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(8950)),u=n(9973);class a extends u.MessagesController{constructor(){super(...arguments),this.service=new i.default}execute({sendResponse:t}){return o(this,void 0,void 0,(function*(){const e=yield this.service.execute();t(e)}))}}e.default=a},6745:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{s(o.next(t))}catch(t){i(t)}}function a(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((o=o.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(8707)),u=n(9973);class a extends u.MessagesController{constructor(){super(...arguments),this.service=new i.default}execute({sendResponse:t}){return o(this,void 0,void 0,(function*(){const e=yield this.service.execute();t(e)}))}}e.default=a},2266:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{s(o.next(t))}catch(t){i(t)}}function a(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((o=o.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(9854)),u=n(9973);class a extends u.MessagesController{constructor(){super(...arguments),this.service=new i.default}execute(){return o(this,void 0,void 0,(function*(){yield this.service.execute()}))}}e.default=a},4624:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{s(o.next(t))}catch(t){i(t)}}function a(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((o=o.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(5690)),u=n(9973);class a extends u.MessagesController{constructor(){super(...arguments),this.service=new i.default}execute(){return o(this,void 0,void 0,(function*(){this.service.execute()}))}}e.default=a},9973:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessagesController=void 0,e.MessagesController=class{}},5844:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{s(o.next(t))}catch(t){i(t)}}function a(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((o=o.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(6966)),u=r(n(5523)),a=n(9973);class s extends a.MessagesController{constructor(){super(...arguments),this.mapper=new i.default,this.service=new u.default}execute({request:t}){return o(this,void 0,void 0,(function*(){const e=this.mapper.toOpenAndExtractTabsByTagRequest(t);this.service.execute(e)}))}}e.default=s},257:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{s(o.next(t))}catch(t){i(t)}}function a(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((o=o.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(1233)),u=n(9973);class a extends u.MessagesController{constructor(){super(...arguments),this.service=new i.default}execute(){return o(this,void 0,void 0,(function*(){yield this.service.execute()}))}}e.default=a},2958:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{s(o.next(t))}catch(t){i(t)}}function a(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((o=o.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(8749)),u=n(9973);class a extends u.MessagesController{constructor(){super(...arguments),this.service=new i.default}execute(){return o(this,void 0,void 0,(function*(){yield this.service.execute()}))}}e.default=a},4733:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{s(o.next(t))}catch(t){i(t)}}function a(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((o=o.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(6966)),u=r(n(7197)),a=n(9973);class s extends a.MessagesController{constructor(){super(...arguments),this.mapper=new i.default,this.service=new u.default}execute({request:t}){return o(this,void 0,void 0,(function*(){const e=this.mapper.toDomainRules(t);yield this.service.execute(e)}))}}e.default=s},1065:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{s(o.next(t))}catch(t){i(t)}}function a(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((o=o.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(6966)),u=r(n(1567)),a=n(9973);class s extends a.MessagesController{constructor(){super(...arguments),this.mapper=new i.default,this.service=new u.default}execute({request:t}){return o(this,void 0,void 0,(function*(){const e=this.mapper.toUpdateTagsRequest(t);yield this.service.execute(e)}))}}e.default=s},760:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e){this.domain=t,this.title=e}}},6970:function(t,e,n){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(n(5917)),i=o(n(8384)),u=o(n(6009)),a=o(n(2014)),s=o(n(4878)),c=o(n(9755)),d=o(n(6745)),f=o(n(2266)),l=o(n(4624)),h=o(n(5844)),_=o(n(257)),v=o(n(2958)),p=o(n(4733)),y=o(n(1065));class m{init(){chrome.runtime.onMessage.addListener(((t,e,n)=>{const o=m.controllers[t.action];return o&&o.execute({request:t,sender:e,sendResponse:n}),!0}))}static getControllersForCommands(){return{[r.default.GROUP_TABS_BY_DOMAIN]:new f.default,[r.default.SORT_TABS_BY_DOMAIN]:new _.default,[r.default.UNGROUP_TABS]:new v.default,[r.default.EXTRACT_TABS]:new a.default,[r.default.EXTRACT_TABS_BY_TAG]:new u.default}}static getControllersForData(){return{[r.default.UPDATE_DOMAIN_RULES]:new p.default,[r.default.GET_DOMAIN_RULES]:new c.default,[r.default.GET_COMMANDS]:new s.default,[r.default.UPDATE_TAGS]:new y.default,[r.default.GET_TAGS]:new d.default,[r.default.OPEN_AND_EXTRACT_TABS_BY_TAG]:new h.default,[r.default.ADD_TAG_TO_CURRENT_TAB]:new i.default,[r.default.MERGE_ALL_TABS]:new l.default}}}m.controllers=Object.assign(Object.assign({},m.getControllersForData()),m.getControllersForCommands()),e.default=m},8519:function(t,e,n){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),(new(o(n(6752)).default)).init()},6966:function(t,e,n){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(n(760));e.default=class{toDomainRules({data:t}){if(!t)throw new Error("Request data is empty");if(!Array.isArray(t))throw new Error("Request data is not an array");return t.map((t=>this.toDomainRule(t)))}toExtractTabsRequest({data:t}){if(!t)throw new Error("Request data is empty");return{domains:this.toString(t).split(",")}}toUpdateTagsRequest({data:t}){if(!t)throw new Error("Request data is empty");if(!Array.isArray(t))throw new Error("Request data is not an array");return{tags:t.map((t=>this.toTag(t)))}}toExtractTabsByTagRequest({data:t}){if(!t)throw new Error("Request data is empty");return{tagName:this.toString(t)}}toOpenAndExtractTabsByTagRequest({data:t}){if(!t)throw new Error("Request data is empty");return{tagName:this.toString(t)}}toAddTagToCurrentTabRequest({data:t}){if(!t)throw new Error("Request data is empty");return{tagName:this.toString(t)}}toTag(t){return{name:this.toString(t.name),urls:this.toStringArray(t.urls)}}toStringArray(t){if(!t)throw new Error("Data is empty");if(!Array.isArray(t))throw new Error("Data is not an array");return t.map((t=>this.toString(t)))}toDomainRule(t){return new r.default(this.toString(t.domain),this.toString(t.title))}toString(t){if(!t||"string"!=typeof t)throw new Error("Data is not a string");return t}}},9086:function(t,e){var n=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{s(o.next(t))}catch(t){i(t)}}function a(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this.DOMAIN_RULES_TABLE_NAME="domain-rules",this.TAGS_TABLE_NAME="tags"}updateDomainRules(t){return n(this,void 0,void 0,(function*(){yield chrome.storage.sync.set({[this.DOMAIN_RULES_TABLE_NAME]:t})}))}getDomainRules(){return n(this,void 0,void 0,(function*(){return(yield chrome.storage.sync.get([this.DOMAIN_RULES_TABLE_NAME]))[this.DOMAIN_RULES_TABLE_NAME]}))}updateTags(t){return n(this,void 0,void 0,(function*(){yield chrome.storage.sync.set({[this.TAGS_TABLE_NAME]:t})}))}getTags(){return n(this,void 0,void 0,(function*(){return(yield chrome.storage.sync.get([this.TAGS_TABLE_NAME]))[this.TAGS_TABLE_NAME]}))}}},9605:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{s(o.next(t))}catch(t){i(t)}}function a(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((o=o.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(9086));e.default=class{constructor(){this.repository=new i.default}execute({tagName:t}){return o(this,void 0,void 0,(function*(){const e=yield this.repository.getTags(),n=(yield this.getCurrentTab()).url||"";e.some((e=>e.name===t))||e.push({name:t,urls:[]});const o=e.find((e=>e.name===t));o.urls.includes(n)||o.urls.push(n),yield this.repository.updateTags(e)}))}getCurrentTab(){return o(this,void 0,void 0,(function*(){return(yield chrome.tabs.query({active:!0,currentWindow:!0}))[0]}))}}},6374:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{s(o.next(t))}catch(t){i(t)}}function a(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((o=o.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(9086));e.default=class{constructor(){this.repository=new i.default,this.tags=[]}execute({tagName:t}){return o(this,void 0,void 0,(function*(){this.tags=yield this.repository.getTags();const e=this.tags.find((e=>e.name===t)),n=yield this.getTabsToExtract(e);this.createWindow(n)}))}createWindow(t){const[e,...n]=t;chrome.windows.create({tabId:e.id,focused:!0},(t=>{n.forEach(((e,n)=>this.moveTab(e.id,t.id,n+1)))}))}moveTab(t,e,n){chrome.tabs.move(t,{windowId:e,index:n})}getTabsToExtract(t){return o(this,void 0,void 0,(function*(){return t?(yield chrome.tabs.query({})).filter((e=>{const n=this.getURLWithoutQueryParams(e.url);return t.urls.map((t=>this.getURLWithoutQueryParams(t))).includes(n)})):[]}))}getURLWithoutQueryParams(t){return t?t.split("?")[0]:""}}},6397:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{s(o.next(t))}catch(t){i(t)}}function a(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((o=o.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(9086)),u=n(7967);e.default=class{constructor(){this.repository=new i.default,this.domainRules=[]}execute({domains:t}){return o(this,void 0,void 0,(function*(){this.domainRules=yield this.repository.getDomainRules();const e=(yield chrome.tabs.query({currentWindow:!0})).filter((e=>{const n=(0,u.getDomainFromURL)(e.url||""),o=this.domainRules.find((t=>t.domain===n));return o&&t.includes(o.title)||t.includes(n)}));this.createWindow(e)}))}createWindow(t){const[e,...n]=t;chrome.windows.create({tabId:e.id,focused:!0},(t=>{n.forEach(((e,n)=>this.moveTab(e.id,t.id,n+1)))}))}moveTab(t,e,n){chrome.tabs.move(t,{windowId:e,index:n})}}},9887:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{s(o.next(t))}catch(t){i(t)}}function a(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((o=o.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(5917));e.default=class{execute(){return o(this,void 0,void 0,(function*(){return[this.getCommandForGroupTabsByDomain(),this.getCommandForUngroupTabs(),this.getCommandForSortTabsByDomain(),this.getCommandForExtractTabs(),this.getCommandForExtractTabsByTag(),this.getCommandForOpenAndExtractTabsByTag(),this.getCommandForAddTagToCurrentTab(),this.getCommandForMergeAllTabs()]}))}getCommandForGroupTabsByDomain(){return{action:i.default.GROUP_TABS_BY_DOMAIN,description:"Group tabs by domain"}}getCommandForUngroupTabs(){return{action:i.default.UNGROUP_TABS,description:"Ungroup tabs"}}getCommandForSortTabsByDomain(){return{action:i.default.SORT_TABS_BY_DOMAIN,description:"Sort tabs by domain"}}getCommandForExtractTabs(){return{action:i.default.EXTRACT_TABS,description:"Extract tabs",hint:"d1,d2,d3..."}}getCommandForExtractTabsByTag(){return{action:i.default.EXTRACT_TABS_BY_TAG,description:"Extract tabs by tag",hint:"tag"}}getCommandForOpenAndExtractTabsByTag(){return{action:i.default.OPEN_AND_EXTRACT_TABS_BY_TAG,description:"Open and extract tabs by tag",hint:"tag"}}getCommandForAddTagToCurrentTab(){return{action:i.default.ADD_TAG_TO_CURRENT_TAB,description:"Add tag to current tab",hint:"tag"}}getCommandForMergeAllTabs(){return{action:i.default.MERGE_ALL_TABS,description:"Merge all tabs"}}}},8950:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{s(o.next(t))}catch(t){i(t)}}function a(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((o=o.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(9086));e.default=class{constructor(){this.respository=new i.default}execute(){return o(this,void 0,void 0,(function*(){return yield this.respository.getDomainRules()}))}}},8707:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{s(o.next(t))}catch(t){i(t)}}function a(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((o=o.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(9086));e.default=class{constructor(){this.repository=new i.default}execute(){return o(this,void 0,void 0,(function*(){return this.repository.getTags()}))}}},9854:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{s(o.next(t))}catch(t){i(t)}}function a(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((o=o.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(9086)),u=n(7967);e.default=class{constructor(){this.repository=new i.default,this.domainRules=[]}execute(){return o(this,void 0,void 0,(function*(){this.domainRules=yield this.repository.getDomainRules();const t=yield chrome.tabs.query({currentWindow:!0}),e=this.groupTabsByDomain(t);for(const[t,n]of Object.entries(e))chrome.tabs.group({tabIds:n.map((t=>t.id))},(e=>this.updateGroupTitle(e,t)))}))}updateGroupTitle(t,e){return o(this,void 0,void 0,(function*(){const n=this.domainRules.find((t=>t.domain===e)),o=n?n.title:e;chrome.tabGroups.update(t,{title:o,collapsed:!0})}))}groupTabsByDomain(t){return t.reduce(((t,e)=>{const n=(0,u.getDomainFromURL)(e.url||"");return t[n]||(t[n]=[]),t[n].push(e),t}),{})}}},5690:function(t,e){var n=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{s(o.next(t))}catch(t){i(t)}}function a(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{execute(){return n(this,void 0,void 0,(function*(){const t=yield chrome.tabs.query({}),[e,...n]=t;chrome.windows.create({tabId:e.id,focused:!0},(t=>{n.forEach((e=>{chrome.tabs.move(e.id,{windowId:t.id,index:-1})}))}))}))}}},5523:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{s(o.next(t))}catch(t){i(t)}}function a(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((o=o.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(9086));e.default=class{constructor(){this.repository=new i.default,this.tags=[]}execute({tagName:t}){return o(this,void 0,void 0,(function*(){this.tags=yield this.repository.getTags();const e=this.tags.find((e=>e.name===t)),n=yield this.getTabsToExtract(e),o=yield this.getTabsToOpen(n,e);this.createWindow(n,o)}))}createWindow(t,e){const[n,...o]=t;chrome.windows.create({tabId:n.id,focused:!0,url:e},(t=>{o.forEach(((e,n)=>this.moveTab(e.id,t.id,n+1)))}))}moveTab(t,e,n){chrome.tabs.move(t,{windowId:e,index:n})}getTabsToOpen(t,e){return o(this,void 0,void 0,(function*(){if(!e)return[];const n=t.map((t=>t.url||""));return e.urls.filter((t=>!n.includes(t)))}))}getTabsToExtract(t){return o(this,void 0,void 0,(function*(){return t?(yield chrome.tabs.query({})).filter((e=>t.urls.includes(e.url||""))):[]}))}}},1233:function(t,e){var n=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{s(o.next(t))}catch(t){i(t)}}function a(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{execute(){return n(this,void 0,void 0,(function*(){(yield chrome.tabs.query({currentWindow:!0})).sort(this.compareTabs).forEach(this.moveTab)}))}compareTabs(t,e){const n=t.url||"",o=e.url||"";return n<o?-1:n>o?1:0}moveTab(t,e){chrome.tabs.move(t.id,{index:e})}}},8749:function(t,e){var n=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{s(o.next(t))}catch(t){i(t)}}function a(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{execute(){return n(this,void 0,void 0,(function*(){(yield chrome.tabs.query({currentWindow:!0})).forEach(this.ungroupTab)}))}ungroupTab(t){chrome.tabs.ungroup(t.id)}}},7197:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{s(o.next(t))}catch(t){i(t)}}function a(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((o=o.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(9086));e.default=class{constructor(){this.respoitory=new i.default}execute(t){return o(this,void 0,void 0,(function*(){yield this.respoitory.updateDomainRules(t)}))}}},1567:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function u(t){try{s(o.next(t))}catch(t){i(t)}}function a(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((o=o.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(9086));e.default=class{constructor(){this.repository=new i.default}execute({tags:t}){return o(this,void 0,void 0,(function*(){yield this.repository.updateTags(t)}))}}},7967:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getDomainFromURL=void 0,e.getDomainFromURL=function(t){let e=new URL(t).hostname;return e.startsWith("www.")&&(e=e.slice(4)),e}}},e={};!function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}(8519)})();