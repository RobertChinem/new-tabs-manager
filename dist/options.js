(()=>{"use strict";var e={917:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default={UPDATE_DOMAIN_RULES:"update_domain_rules",GET_DOMAIN_RULES:"get_domain_rules"}},503:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(n(192)),l=i(n(845)),s=i(n(354)),u=i(n(455)),o=i(n(439));class r{constructor(){this.domainRules=[]}createBlankDomainRule(){this.domainRules.push({domain:"",title:""})}updateDomainRule(e,t){this.domainRules[e]=t}deleteDomainRule(e){this.domainRules.splice(e,1)}}t.default=class{constructor(e){this.state=new r,this.gateway=new a.default,this.root=e}init(){this.gateway.getDomainRules().then((e=>{this.state.domainRules.push(...e),this.refresh()}))}buildLayout(){return new s.default({children:[new u.default({type:"h1",text:"Options Page"}),new s.default({children:[...this.state.domainRules.map(((e,t)=>new s.default({children:[new o.default({value:e.domain,onChange:e=>{this.handleUpdateDomainRule(t,{domain:e})}}),new o.default({value:e.title,onChange:e=>{this.handleUpdateDomainRule(t,{title:e})}}),new l.default({text:"Delete",onClick:()=>this.handleDeleteRuleClick(t)})]})))]}),new s.default({children:[new l.default({text:"Add new rule",onClick:()=>{this.handleAddNewRuleClick()}}),new l.default({text:"Save changes",onClick:()=>{this.handleSaveChangesClick()}})]})]})}refresh(){this.root.innerHTML="",this.root.appendChild(this.buildLayout().render())}handleAddNewRuleClick(){this.state.createBlankDomainRule(),this.refresh()}handleSaveChangesClick(){this.gateway.saveDomainRules(this.state.domainRules)}handleDeleteRuleClick(e){this.state.deleteDomainRule(e),this.refresh()}handleUpdateDomainRule(e,t){const n=this.state.domainRules[e];t.domain&&(n.domain=t.domain),t.title&&(n.title=t.title),this.state.updateDomainRule(e,n)}}},845:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor({text:e,onClick:t}){this.text=e,this.onClick=t}render(){const e=document.createElement("button");return e.innerText=this.text,e.addEventListener("click",this.onClick),e}}},354:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor({children:e}){this.children=[],this.children=e}render(){const e=document.createElement("div");return this.children.forEach((t=>{e.appendChild(t.render())})),e}}},455:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor({text:e,type:t}){this.text=e,this.type=t}render(){const e=document.createElement(this.type);return e.innerText=this.text,e}}},439:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor({value:e,onChange:t}){this.value=e,this.onChange=t}render(){const e=document.createElement("input");return e.type="text",e.value=this.value,e.addEventListener("input",(e=>{const t=e.target;this.onChange(t.value)})),e}}},192:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,l){function s(e){try{o(i.next(e))}catch(e){l(e)}}function u(e){try{o(i.throw(e))}catch(e){l(e)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,u)}o((i=i.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=a(n(917));t.default=class{saveDomainRules(e){return i(this,void 0,void 0,(function*(){yield this.sendToBackgroundService(l.default.UPDATE_DOMAIN_RULES,e)}))}getDomainRules(){return i(this,void 0,void 0,(function*(){return yield this.sendToBackgroundService(l.default.GET_DOMAIN_RULES,null)}))}sendToBackgroundService(e,t){return new Promise((n=>{chrome.runtime.sendMessage({action:e,data:t},(e=>{n(e)}))}))}}},764:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(n(503));document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("main-view");new a.default(e).init()}))}},t={};!function n(i){var a=t[i];if(void 0!==a)return a.exports;var l=t[i]={exports:{}};return e[i].call(l.exports,l,l.exports,n),l.exports}(764)})();